<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>
<title>MathML Sample (Images)</title>
<meta charset="UTF-8"/> 
<link rel="stylesheet" type="text/css" href="../Styles/a11yMath.css"/>
<script src="../Misc/a11yMath.js"> </script>
</head>

<body onload="MakeMathAccessible()">
<h1> Sample page with Math encoded as Images</h1>
<h2> Image Math Description</h2>
<p>
This page uses &lt;img&gt; elements to encode math. All images that represent math should have a <i>class</i> attribue whose value includes <i>MathImageNoSR</i>. The <i>alt</i> attribute should describe the math as a fallback description. The vertical-align CSS property should be set as a style on each &lt;img&gt; tag to make sure the image properly aligns with the surrounding text for inline math. It is preferable to use SVG rather than a raster format such as png so that the image scales nicely when the page is zoomed.
</p>
<h2>Additional requirements to make the math accessible</h2>
<p>
In order to make this accessible, two separate elements are used as shown:
    </p>
    <div>
      <pre>
&lt;math xmlns="http://www.w3.org/1998/Math/MathML" class="MathMLNoDisplay" aria-hidden="true"&gt; ...MathML... &lt;/math&gt;
&lt;img class="... MathImageNoSR" src="..." style="vertical-align: ...amount to shift...;" alt="...text to speak..." &gt;
    </pre>
  </div>
  <p>Although the order is not important, we use an ordering to simplify the description.</p>
  <ol>
<li>The first item is the MathML equivalent of the image. This element allows for full accessibility when possible. The element is clipped and invisible to both display and speech. When MathML and JS are supported, this element has aria-hidden changed to 'false' so that the reading system uses it.</li>
<li>An image element with 'alt' set and 'vertical-align' set (typically to a negative value in 'ex's). By default, this image is visible and the alt text is spoken. When MathML and JS are supported, this element is changed to be hidden and have alt text be an empty string so it is not spoken. The JS looks for the class name <i>MathImageNoSR</i>, so it must be set on images that represent math.</li>
</ol>

<p>
If there is <em>no</em> JavaScript support, then we presume there is no MathML support and have the cases:
    </p>
<ul>
<li>ARIA supported: the first element is neither read nor displayed and the third element is both displayed and read.</li>
<li><em>No</em> ARIA support (Kindle only?): we get double reading, with garbage read for the MathML.
<i>It is possible that the EPUB-to-MOBI conversion tool strips the MathML so that we only get a single reading.</i> The style sheet for Kindle's should remove the MathML from the reading and display this should work as intended.</li>
</ul>

<p>
Note: when reading alt text, some screen readers will say something like "graphic" or "image" before reading the alt text. If the alt text is long, it may stop in the middle of the reading and repeat "graphic" before reading more. E.g., NVDA reads the long equation below as "graphic y minus y sub 1 ... and denominator x". Hitting down arrow again resumes reading with "graphic 2 minus x sub 1 ...".
</p>
<h2>Math sample text</h2>
<p>
The formula for a line that runs through the points
<span class="NoJavaHiddenMathML" aria-hidden="true">
    <math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" alttext="x sub 1, y sub 1">
  <mo>(</mo>
    <msub> <mi>x</mi><mn>1</mn></msub>
	 <mo>,</mo>
    <msub> <mi>y</mi><mn>1</mn></msub>
  <mo>)</mo>
</math>
</span>
<img class="MathImageNoSR" src="../Images/epub-image-x1y1.svg" style="vertical-align: -0.844ex;" alt="x sub 1 y sub 1"/>
and
<span class="NoJavaHiddenMathML" aria-hidden="true">
<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" alttext="x sub 2 y sub 2">
  <mo>(</mo>
    <msub> <mi>x</mi><mn>2</mn> </msub>
	 <mo>,</mo>
    <msub> <mi>y</mi><mn>2</mn> </msub>
  <mo>)</mo>
</math>
    </span>
<img class="MathImageNoSR" src="../Images/epub-image-x2y2.svg" style="vertical-align: -0.844ex;" alt="x sub 2 y sub 2"/>
is:
</p>
<!-- too complicated for HTML Math - fall back to an image -->
<span class="NoJavaHiddenMathML" aria-hidden="true">
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="MathMLNoDisplay" alttext="y minus y 1 equals StartFraction y 2 minus y 1 Over x 2 minus x 1 EndFraction left-parenthesis x minus x 1 right-parenthesis">
    <mrow>
      <mstyle displaystyle="true">
        <mi>y</mi>
        <mo>−<!-- − --></mo>
        <msub>
          <mi>y</mi>
          <mrow>
            <mn>1</mn>
          </mrow>
        </msub>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <msub>
                <mi>y</mi>
                <mrow>
                  <mn>2</mn>
                </mrow>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>y</mi>
                <mrow>
                  <mn>1</mn>
                </mrow>
              </msub>
            </mrow>
            <mrow>
              <msub>
                <mi>x</mi>
                <mrow>
                  <mn>2</mn>
                </mrow>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>x</mi>
                <mrow>
                  <mn>1</mn>
                </mrow>
              </msub>
            </mrow>
          </mfrac>
        </mrow>
        <mo stretchy="false">(</mo>
        <mi>x</mi>
        <mo>−<!-- − --></mo>
        <msub>
          <mi>x</mi>
          <mrow>
            <mn>1</mn>
          </mrow>
        </msub>
        <mo stretchy="false">)</mo>
      </mstyle>
    </mrow>
</math>
    </span>
<img class="MathImageNoSR" src="../Images/epub-image-2pointform.svg" style="vertical-align: -2.103ex;" alt="y minus y sub 1, equals, the fraction with numerator y sub 2 minus y sub 1, and denominator x sub 2 minus x sub 1, times open paren x minus x sub 1 close paren"/>
<p>
where
<span class="NoJavaHiddenMathML" aria-hidden="true">
<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" alttext="x sub 2 not-equals x sub 1">
  <msub> <mi>x</mi><mn>2</mn> </msub>
  <mo>≠<!-- not equals --></mo>
  <msub> <mi>x</mi><mn>1</mn> </msub>
</math>
    </span>    
<img class="MathImageNoSR" src="../Images/epub-image-x2nex1.svg" style="vertical-align: -0.704ex;" alt="x sub 2 not equal to x sub 1"/>.
</p>

</body>
</html>
