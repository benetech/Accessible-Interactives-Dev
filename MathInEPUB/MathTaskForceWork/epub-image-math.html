<!DOCTYPE html>
<html xmlns="http://www.w3.org/TR/REC-html40">

<head>
<title>MathML Sample (Images)</title>
<meta charset="UTF-8"> 
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />
<link rel="stylesheet" type="text/css" href="a11yMath.css">
<script type="text/javascript" src="a11yMath.js"> </script>
</head>

<body lang="EN-US" onload="MakeMathAccessible()">
<h1> Sample page with Math encoded as Images</h1>
<h2> Image Math Description</h2>
<p>
This page uses &lt;img&gt; elements to encode math. The <i>alt</i> attribute should describe the math as a fallback description. The vertical-align CSS property should be set as a style on each &lt;img&gt; tag to make sure the image properly aligns with the surrounding text for inline math. It is preferable to use SVG rather than a raster format such as png so that the image scales nicely when the page is zoomed.
</p>
<h2>Additional requirements to make the math accessible</h2>
<p>
In order to make this accessible, two separate elements are used as shown:
<pre>
&lt;math xmlns="http://www.w3.org/1998/Math/MathML" class="MathMLNoDisplay" aria-hidden="true"&gt; ...MathML... &lt;/math&gt;
&lt;img src="..."  role="math" style="vertical-align: ...amount to shift...;" alt="...text to speak..." &gt;
</pre>
Although the order is not important, we use an ordering to simplify the description.
<ol>
<li>The first item is the MathML equivalent of the HTML Math. This element allows for full accessibility when possible. The element is clipped and invisible to both display and speech. When MathML and JS are supported, this element has aria-hidden changed to 'false' so that the reading system uses it.</li>
<li>An image element with 'alt' sent and 'vertical-align' set (typically to a negative value in 'ex's). By default, this image is visible and the alt text is spoken. When MathML and JS are supported, this element is changed to be hidden and have alt text be an empty string so it is not spoken.</li>
</ol>
</p>
<p>
If there is <em>no</em> JavaScript support, then we presume there is no MathML support and have the cases:
<ul>
<li>ARIA supported: the first element is neither read nor displayed and the third element is both displayed and read.</li>
<li><em>No</em> ARIA support (Kindle only?): we get double reading, with garbage read for the MathML.
<i>It is possible that the EPUB-to-MOBI conversion tool strips the MathML so that we only get a single reading.</i> The style sheet for Kindle's should remove the MathML from the reading and display this should work as intended.</li>
</ul>
</p>
<p>
Note: when reading alt text, some screen readers will say something like "graphic" or "image" before reading the alt text. If the alt text is long, it may stop in the middle of the reading and repeat "graphic" before reading more. E.g., NVDA reads the long equation below as "graphic y minus y sub 1 ... and denominator x". Hitting down arrow again resumes reading with "graphic 2 minus x sub 1 ...".
</p>
<h2>Math sample text</h2>
<p>
The formula for a line that runs through the points
<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" aria-hidden="true">
  <mo>(</mo>
    <msub> <mi>x</mi><mn>1</mn></msub>
	 <mo>,</mo>
    <msub> <mi>y</mi><mn>1</mn></msub>
  <mo>)</mo>
</math>
<img src="epub-image-x1y1.svg" style="vertical-align: -0.844ex;" role="math" alt="x sub 1 y sub 1">
and
<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" aria-hidden="true">
  <mo>(</mo>
    <msub> <mi>x</mi><mn>2</mn> </msub>
	 <mo>,</mo>
    <msub> <mi>y</mi><mn>2</mn> </msub>
  <mo>)</mo>
</math>
<img src="epub-image-x2y2.svg" style="vertical-align: -0.844ex;" role="math" alt="x sub 2 y sub 2">
is:
</p>
<!-- too complicated for HTML Math - fall back to an image -->
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block" class="MathMLNoDisplay" aria-hidden="true">
    <mrow>
      <mstyle displaystyle="true">
        <mi>y</mi>
        <mo>&#x2212;<!-- − --></mo>
        <msub>
          <mi>y</mi>
          <mrow>
            <mn>1</mn>
          </mrow>
        </msub>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <msub>
                <mi>y</mi>
                <mrow>
                  <mn>2</mn>
                </mrow>
              </msub>
              <mo>&#x2212;<!-- − --></mo>
              <msub>
                <mi>y</mi>
                <mrow>
                  <mn>1</mn>
                </mrow>
              </msub>
            </mrow>
            <mrow>
              <msub>
                <mi>x</mi>
                <mrow>
                  <mn>2</mn>
                </mrow>
              </msub>
              <mo>&#x2212;<!-- − --></mo>
              <msub>
                <mi>x</mi>
                <mrow>
                  <mn>1</mn>
                </mrow>
              </msub>
            </mrow>
          </mfrac>
        </mrow>
        <mo stretchy="false">(</mo>
        <mi>x</mi>
        <mo>&#x2212;<!-- − --></mo>
        <msub>
          <mi>x</mi>
          <mrow>
            <mn>1</mn>
          </mrow>
        </msub>
        <mo stretchy="false">)</mo>
      </mstyle>
    </mrow>
</math>
<img src="epub-image-2pointform.svg"  style="vertical-align: -2.103ex;" role="math" alt="y minus y sub 1, equals, the fraction with numerator y sub 2 minus y sub 1, and denominator x sub 2 minus x sub 1, times open paren x minus x sub 1 close paren" />
<p>
where
<math xmlns="http://www.w3.org/1998/Math/MathML" display="inline" class="MathMLNoDisplay" aria-hidden="true">
  <msub> <mi>x</mi><mn>2</mn> </msub>
  <mo>&#x2260;<!-- not equals --></mo>
  <msub> <mi>x</mi><mn>1</mn> </msub>
</math>
<img src="epub-image-x2nex1.svg" style="vertical-align: -0.704ex;" role="math" alt="x sub 2 not equal to x sub 1"/>.
</p>

</body>
</html>
